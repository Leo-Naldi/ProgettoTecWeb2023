import{m as A,g as V,l as N,C as F,q as R,p as v,t as K,s as x,h as z,Q as S}from"./CloseDialog.f0183c26.js";import{Q as b}from"./QSeparator.92a6cda9.js";import{Q as G,b as X}from"./WritePost.1ecdca4f.js";import{_ as E,r as d,a5 as C,a6 as L,bA as Y,bB as W,D as p,E as g,F as t,G as e,H as n,b8 as Z,bd as $,ac as q,Q as m,ai as M,X as ee,a7 as o,Y as te,k as J,S as le,bC as se,C as Q,a9 as T,ad as ae,a8 as h,ab as oe,aa as ne,ae as re,a0 as ie,a1 as ue}from"./index.b8bea508.js";import{Q as D}from"./QInput.c0248187.js";import{Q as B}from"./QForm.0a780925.js";import{b as _,Q as u,a as i}from"./QItem.ea7b6016.js";import{Q as P}from"./QList.97ee5378.js";import{C as de}from"./ConfirmPopup.b78e8aa6.js";import{Q as j}from"./QCardActions.f9bcb485.js";import{C as U}from"./ClosePopup.da0077f2.js";import{S as me}from"./ShowPost.46485ab7.js";import"./use-dark.880f3e4e.js";import"./focus-manager.05708ea9.js";import"./QResizeObserver.231b9bb5.js";import"./QCheckbox.952440f4.js";import"./format.3e32b8d9.js";import"./map.c8319187.js";const fe={name:"InsertPopup",props:{insertData:{type:Number,default:-1}},data(){return{toModify:d(""),confirmChangeMail:d(!1),consentChangeMail:d(!1),localMail:C().getUserJson.email}},setup(){const{email:r}=ee();return{email:r}},methods:{async verifyMailHandler(){var r=C().getUserHandle,l=C().getUserToken;this.email(this.toModify)!=!0?L("email format not exists! Please check and insert again!"):this.toModify===this.localMail?await Y(this.toModify,r,l):L("email not correct! Please check and insert again!"),console.log("verify mail to send is: ",this.toModify,this.localMail,r,l)},async handleInsert(){switch(console.log("props data is:",this.$props.insertData),this.$props.insertData){case 1:var r={email:this.toModify};await W(r);break;case 2:await this.verifyMailHandler();break;default:console.log("no submit")}}}},ce={class:"text-h6"},pe=n("span",{class:"q-ml-sm center"},[o("Are you sure you want to use this mail? "),n("br"),o(" This mail is different from the mail you registered! "),n("br"),o(" Click confirm if you want to "),n("b",null,"overwrite"),o(" your registered mail!")],-1);function ye(r,l,y,f,s,w){return p(),g(N,{style:{"min-width":"350px"}},{default:t(()=>[e(A,null,{default:t(()=>[n("div",ce,[Z(r.$slots,"default")])]),_:3}),e(A,{class:"q-pt-none"},{default:t(()=>[e(D,{dense:"",modelValue:s.toModify,"onUpdate:modelValue":l[0]||(l[0]=c=>s.toModify=c),autofocus:"",onKeyup:l[1]||(l[1]=$(c=>r.prompt=!1,["enter"]))},null,8,["modelValue"])]),_:1}),e(j,{align:"right",class:"text-primary"},{default:t(()=>[q(e(m,{flat:"",label:"Cancel"},null,512),[[U]]),e(B,{onSubmit:l[5]||(l[5]=c=>w.handleInsert())},{default:t(()=>[y.insertData===1?q((p(),g(m,{key:0,flat:"",label:"Modify email",type:"submit"},null,512)),[[U]]):M("",!0),y.insertData===2?(p(),g(m,{key:1,flat:"",label:"Verify Account",type:s.toModify==s.localMail?"submit":"","v-close-popup":s.toModify==s.localMail?"true":"false",onClick:l[4]||(l[4]=c=>s.confirmChangeMail=!0)},{default:t(()=>[y.insertData===3&&s.toModify!=s.localMail?(p(),g(V,{key:0,modelValue:s.confirmChangeMail,"onUpdate:modelValue":l[3]||(l[3]=c=>s.confirmChangeMail=c),persistent:""},{default:t(()=>[e(N,null,{default:t(()=>[e(A,{class:"row items-center"},{default:t(()=>[pe]),_:1}),e(j,{align:"right"},{default:t(()=>[q(e(m,{flat:"",label:"Cancel",color:"primary"},null,512),[[U]]),q(e(m,{flat:"",label:"Confirm",color:"primary",onClick:l[2]||(l[2]=c=>r.modifyMail())},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"])):M("",!0)]),_:1},8,["type","v-close-popup"])):M("",!0)]),_:1})]),_:1})]),_:3})}var _e=E(fe,[["render",ye]]),ge="/assets/head.444a7c0d.png";const be={name:"SettingsPage",setup(){const r=C(),l=te(),y=J(()=>r.getUserJson),f=JSON.parse(JSON.stringify(y.value)).subscription,s=J(()=>l.getHideList),w=C().getUserJson;return{userStore:r,storedUser:y,isMember:f,hided_posts:s,userJson:w}},data(){return{confirm:d(!1),autoRenew:d(!1),resetPopup:"Are you sure you want to reset the password?!",deletePopup:"Are you sure you want to delete the account?!",cancelPlanPopup:"Are you sure you want to cancel your plan?!",username:"",user_description:"",settingsTab:"basicSettings",prompt:d(!1),telephone:d(""),resetPassword:d(!1),cancelPlan:d(!1),deleteAccountProps:d(!1),insertHeader:"Modify your email!",verifyHeader:"Insert your mail to send verification url!",modifyTelephone:d(!1),modifyEmail:d(!1),verifyAccount:d(!1),confirmDelete:d(!1),userData:le({username:"",gender:"",name:"",lastname:"",description:""})}},components:{CloseDialog:F,ConfirmPopup:de,InsertPopup:_e,ShowPost:me},methods:{filteredData(r){return Object.entries(r).reduce((l,[y,f])=>(f!==""&&(l[y]=f),l),{})},submitUserdata(){const r=JSON.parse(JSON.stringify(this.userData)),l=this.filteredData(r);se(l)}}},k=r=>(ie("data-v-fa6a419a"),r=r(),ue(),r),ve={class:"q-px-md"},xe={class:"col-sm col-xs-12 q-px-md q-pt-none"},he={class:"text-h5 col-12 q-mb-md",style:{cursor:"help"}},Ve={class:"col-xs-12 q-mb-md"},we={class:"text-center block"},Se={class:"text-center block"},Pe={class:"col-xs-12 q-gutter-y-md q-pt-md q-pl-md q-pb-md"},qe={class:"row q-gutter-x-sm"},De={class:"row q-gutter-x-sm"},Ce=k(()=>n("div",{class:"text-h5 col-12 q-mb-md"},"Plan Settings",-1)),Me={class:"flex flex-center",style:{width:"400px",position:"absolute"}},ke=k(()=>n("div",{class:"text-h5 col-12 q-mb-md"},"Security Settings",-1)),Qe={class:"flex flex-center",style:{width:"400px",position:"absolute"}},Ue={class:"flex flex-center",style:{width:"500px",position:"absolute"}},Ae={class:"flex flex-center",style:{width:"400px",position:"absolute"}},Ie=k(()=>n("div",{class:"text-h5 col-12 q-mb-md"},"Login Logs",-1)),Te={class:"flex flex-center",style:{width:"400px",position:"absolute"}},Ne={key:1},He=k(()=>n("div",{class:"text-h5 col-12 q-mb-md"},"Login Logs",-1)),Le=k(()=>n("div",{class:"text-h5 col-12 q-mb-md"},"Delete your account",-1)),Je={style:{"margin-top":"2rem","margin-left":"2rem"}};function je(r,l,y,f,s,w){const c=Q("CloseDialog"),I=Q("ConfirmPopup"),H=Q("InsertPopup"),O=Q("ShowPost");return p(),T("div",ve,[e(N,{flat:"",square:""},{default:t(()=>[e(A,{class:"q-pa-none q-py-md row"},{default:t(()=>[n("div",null,[e(R,{modelValue:s.settingsTab,"onUpdate:modelValue":l[0]||(l[0]=a=>s.settingsTab=a),align:"left","active-color":"primary","active-bg-color":"blue-1",class:"text-grey-10",vertical:""},{default:t(()=>[e(v,{name:"basicSettings",label:"Account settings",style:{"justify-content":"left"},"content-class":"q-pl-md"}),e(v,{name:"planSettings",label:"premium",style:{"justify-content":"left"},"content-class":"q-pl-md"}),e(v,{name:"safeSettings",label:"safe settings",style:{"justify-content":"left"},"content-class":"q-pl-md"}),e(v,{name:"privacySettings",label:"privacy settings",style:{"justify-content":"left"},"content-class":"q-pl-md"}),e(v,{name:"authSettings",label:"Account safety",style:{"justify-content":"left"},"content-class":"q-pl-md"}),e(v,{name:"deleteAccount",label:"Delete Account",style:{"justify-content":"left"},"content-class":"q-pl-md"})]),_:1},8,["modelValue"])]),q(e(b,{vertical:r.$q.screen.gt.xs},null,8,["vertical"]),[[ae,r.$q.screen.gt.xs]]),n("div",xe,[e(K,{modelValue:s.settingsTab,"onUpdate:modelValue":l[17]||(l[17]=a=>s.settingsTab=a),animated:"","transition-prev":"fade","transition-next":"fade"},{default:t(()=>[e(x,{name:"basicSettings",class:"row q-pt-sm"},{default:t(()=>[n("div",he,[o("Account Settings"),e(z,{class:"bg-grey text-body2",offset:[10,10]},{default:t(()=>[o(" If you do not want to change one of them, please leave them empty ")]),_:1})]),n("div",Ve,[n("span",we,[e(G,{src:ge,width:"180px",ratio:10/10})]),n("span",Se,[e(m,{unelevated:"",color:"primary",label:"change avatar",icon:"unarchive"})])]),n("div",Pe,[e(B,{onSubmit:l[6]||(l[6]=a=>w.submitUserdata()),class:"q-gutter-md"},{default:t(()=>[n("span",qe,[e(D,{class:"col",outlined:"",dense:"",square:"",label:"nickname",modelValue:s.userData.username,"onUpdate:modelValue":l[1]||(l[1]=a=>s.userData.username=a)},null,8,["modelValue"]),e(X,{class:"col",outlined:"",dense:"",square:"",behavior:"menu",label:"gender","options-dense":"",options:["\u2642\uFE0F","\u2640\uFE0F","\u26A7"],modelValue:s.userData.gender,"onUpdate:modelValue":l[2]||(l[2]=a=>s.userData.gender=a)},null,8,["modelValue"])]),n("span",De,[e(D,{class:"col",outlined:"",dense:"",square:"",label:"firstname",modelValue:s.userData.name,"onUpdate:modelValue":l[3]||(l[3]=a=>s.userData.name=a)},null,8,["modelValue"]),e(D,{class:"col",outlined:"",dense:"",square:"",label:"lastname",modelValue:s.userData.lastname,"onUpdate:modelValue":l[4]||(l[4]=a=>s.userData.lastname=a)},null,8,["modelValue"])]),e(D,{type:"textarea",outlined:"",dense:"",square:"",label:"personal descriptions",modelValue:s.userData.description,"onUpdate:modelValue":l[5]||(l[5]=a=>s.userData.description=a)},null,8,["modelValue"]),e(m,{label:"update data",type:"submit",color:"primary",unelevated:""})]),_:1})])]),_:1}),e(x,{name:"planSettings",class:"q-pt-sm"},{default:t(()=>[Ce,e(P,{class:"text-body2"},{default:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[e(i,null,{default:t(()=>[o("Pay plan")]),_:1}),e(i,{class:"text-grey-6"},{default:t(()=>[o("become our member! ")]),_:1})]),_:1}),e(u,{avatar:""},{default:t(()=>[e(m,{flat:"",unelevated:"",color:"primary",label:"Modify"},{default:t(()=>[e(S,null,{default:t(()=>[n("div",Me,[e(c,{choosePlan:!0})])]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{inset:"",spaced:"10px"}),f.storedUser.subscription?(p(),g(_,{key:0},{default:t(()=>[e(u,null,{default:t(()=>[e(i,null,{default:t(()=>[o("Cancel plan")]),_:1}),e(i,{class:"text-grey-6"},{default:t(()=>[o("delete your plan ")]),_:1})]),_:1}),e(u,{avatar:""},{default:t(()=>[e(m,{flat:"",unelevated:"",color:"primary",label:"Cancel",onClick:l[8]||(l[8]=a=>s.cancelPlan=!0)},{default:t(()=>[e(V,{modelValue:s.cancelPlan,"onUpdate:modelValue":l[7]||(l[7]=a=>s.cancelPlan=a),persistent:""},{default:t(()=>[e(I,{"confirm-data":5},{default:t(()=>[o(h(s.cancelPlanPopup),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})):M("",!0),f.storedUser.subscription?(p(),g(b,{key:1,inset:"",spaced:"10px"})):M("",!0)]),_:1})]),_:1}),e(x,{name:"safeSettings",class:"q-pt-sm"},{default:t(()=>[ke,e(P,{class:"text-body2"},{default:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[e(i,null,{default:t(()=>[o("Modify password")]),_:1}),e(i,{class:"text-grey-6"},{default:t(()=>[o("current password strengh: strong ")]),_:1})]),_:1}),e(u,{avatar:""},{default:t(()=>[e(m,{flat:"",unelevated:"",color:"primary",label:"Modify"},{default:t(()=>[e(S,null,{default:t(()=>[n("div",Qe,[e(c,{modifyPassword:!0})])]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{inset:"",spaced:"10px"}),e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[e(i,null,{default:t(()=>[o("Reset password")]),_:1}),e(i,{class:"text-grey-6"},{default:t(()=>[o("current password strengh: strong ")]),_:1})]),_:1}),e(u,{avatar:""},{default:t(()=>[e(m,{flat:"",unelevated:"",color:"primary",label:"Reset",onClick:l[10]||(l[10]=a=>s.resetPassword=!0)},{default:t(()=>[e(V,{modelValue:s.resetPassword,"onUpdate:modelValue":l[9]||(l[9]=a=>s.resetPassword=a),persistent:""},{default:t(()=>[e(I,{"confirm-data":1},{default:t(()=>[o(h(s.resetPopup),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,{inset:"",spaced:"10px"}),e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[e(i,null,{default:t(()=>[o("email")]),_:1}),e(i,{class:"text-grey-6"},{default:t(()=>[o(" change bined email ")]),_:1})]),_:1}),e(u,{avatar:""},{default:t(()=>[e(m,{flat:"",unelevated:"",color:"primary",label:"Modify",onClick:l[12]||(l[12]=a=>s.modifyEmail=!0)},{default:t(()=>[e(S,null,{default:t(()=>[n("div",Ue,[e(V,{modelValue:s.modifyEmail,"onUpdate:modelValue":l[11]||(l[11]=a=>s.modifyEmail=a),persistent:""},{default:t(()=>[e(H,{insertData:1},{default:t(()=>[o(h(s.insertHeader),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{inset:"",spaced:"10px"}),e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[e(i,null,{default:t(()=>[o("verify")]),_:1}),e(i,{class:"text-grey-6"},{default:t(()=>[o(" verify your account with your mail ")]),_:1})]),_:1}),e(u,{avatar:""},{default:t(()=>[e(m,{flat:"",unelevated:"",color:"primary",label:"Verify",onClick:l[14]||(l[14]=a=>s.verifyAccount=!0)},{default:t(()=>[e(S,null,{default:t(()=>[n("div",Ae,[e(V,{modelValue:s.verifyAccount,"onUpdate:modelValue":l[13]||(l[13]=a=>s.verifyAccount=a),persistent:""},{default:t(()=>[e(H,{insertData:2},{default:t(()=>[o(h(s.verifyHeader),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{inset:"",spaced:"10px"})]),_:1})]),_:1}),e(x,{name:"privacySettings",class:"q-pt-sm"},{default:t(()=>[Ie,e(P,{class:"text-body2"},{default:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[e(i,{clickable:"",class:"cursor-pointer"},{default:t(()=>[o("See hided posts "),e(S,null,{default:t(()=>[n("div",Te,[e(c,null,{default:t(()=>[f.hided_posts.length>0?(p(),g(P,{key:0,separator:""},{default:t(()=>[(p(!0),T(oe,null,ne(f.hided_posts,a=>(p(),g(O,re({key:a.id},a,{clickable:""}),null,16))),128))]),_:1})):(p(),T("p",Ne,"No hided posts!"))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{name:"authSettings",class:"q-pt-sm"},{default:t(()=>[He,e(P,{class:"text-body2"},{default:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[e(i,null,{default:t(()=>[o("Last login Time")]),_:1}),e(i,{class:"text-grey-6"},{default:t(()=>[o(h(f.userJson.lastLoggedin),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{name:"deleteAccount",class:"q-pt-sm"},{default:t(()=>[Le,n("div",Je,[e(m,{label:"Delete",color:"primary",size:"md",onClick:l[16]||(l[16]=a=>s.confirmDelete=!0)},{default:t(()=>[e(V,{modelValue:s.confirmDelete,"onUpdate:modelValue":l[15]||(l[15]=a=>s.confirmDelete=a),persistent:"",style:{width:"250px"}},{default:t(()=>[e(I,{"confirm-data":2},{default:t(()=>[o(h(s.deletePopup),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})])}var ot=E(be,[["render",je],["__scopeId","data-v-fa6a419a"]]);export{ot as default};
