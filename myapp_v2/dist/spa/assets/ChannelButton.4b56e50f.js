import{_ as c,a5 as o,k as x,Z as f,aF as m,D as b,E as d,F as p,a7 as w,a8 as g,aG as T,Q as C}from"./index.b8bea508.js";const q={props:{channel_name:{type:String,required:!0},channel:{type:Object,default:null}},setup(t){const e=o(),i="Follow",s="Unfollow",a="Following",n="Request",r="Requesting",l="Cancel",h="Admin",u="Created",_=t.channel||x(()=>f().getChannel(t.getChannel));return{userStore:e,follow_text:i,unfollow_text:s,following_text:a,request_text:n,requesting_text:r,cancel_text:l,admin_text:h,created_text:u,channel_json:_}},data(){return{isMember:!1,isCreator:!1,isRequestingMember:!1,buttonText:this.follow_text}},methods:{setButtonText(){return this.isCreator?this.created_text:this.isMember?this.following_text:this.isRequestingMember?this.requesting_text:this.follow_text},mouseOver(){const t=this.buttonText;t===this.follow_text?this.buttonText=this.request_text:t===this.following_text?this.buttonText=this.unfollow_text:t===this.requesting_text?this.buttonText=this.cancel_text:t===this.created_text&&(this.buttonText=this.admin_text)},mouseLeave(){const t=this.buttonText;t===this.request_text?this.buttonText=this.follow_text:t===this.unfollow_text?this.buttonText=this.following_text:t===this.cancel_text?this.buttonText=this.requesting_text:t===this.admin_text&&(this.buttonText=this.created_text)},async requestChannel(){this.buttonText===this.request_text?(await o().requestMember(this.channel_json),this.buttonText=this.requesting_text):this.buttonText===this.unfollow_text?await o().leaveChannel(this.$props.channel_name)===200&&(this.buttonText=this.follow_text):this.buttonText===this.cancel_text?(await o().cancelRequestChannelMember({channel_name:this.$props.channel_name}),this.buttonText=this.follow_text):this.buttonText===this.admin_text&&m().showNegative("You cannot leave this channel because you're the creator!")}},computed:{user_json(){return JSON.parse(JSON.stringify(this.userStore.getUserJson))},text_to_show(){return this.setButtonText()}},mounted(){const t=this.user_json.joinedChannels.map(s=>s.name),e=this.user_json.joinChannelRequests,i=this.user_json.createdChannels.map(s=>s.name);this.isMember=t.includes(this.$props.channel_name),this.isCreator=i.includes(this.$props.channel_name),this.isRequestingMember=e.includes(this.$props.channel_name),this.buttonText=this.isCreator?this.created_text:this.isMember?this.following_text:this.isRequestingMember?this.requesting_text:this.follow_text}};function v(t,e,i,s,a,n){return b(),d(C,{class:"leave-button",onMouseover:n.mouseOver,onMouseleave:n.mouseLeave,onClick:e[0]||(e[0]=T(r=>n.requestChannel(),["stop","prevent"]))},{default:p(()=>[w(g(a.buttonText),1)]),_:1},8,["onMouseover","onMouseleave"])}var j=c(q,[["render",v],["__scopeId","data-v-2c816835"]]);export{j as C};
