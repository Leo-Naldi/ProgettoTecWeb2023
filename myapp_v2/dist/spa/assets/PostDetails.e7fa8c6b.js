import{Q as d}from"./QSeparator.92a6cda9.js";import{Q as k}from"./QList.97ee5378.js";import{Q as x}from"./QPage.0605acda.js";import{S as f}from"./ShowPost.46485ab7.js";import{W as I}from"./WritePost.1ecdca4f.js";import{a4 as Q,S,w as h,b as R,C as v,D as r,E as i,F as _,Y as n,a9 as l,aa as P,ab as y,G as p,aU as C,ai as b,ae as w}from"./index.b8bea508.js";import"./use-dark.880f3e4e.js";import"./QItem.ea7b6016.js";import"./ClosePopup.da0077f2.js";import"./focus-manager.05708ea9.js";import"./CloseDialog.f0183c26.js";import"./QInput.c0248187.js";import"./QResizeObserver.231b9bb5.js";import"./QCardActions.f9bcb485.js";import"./QForm.0a780925.js";import"./QCheckbox.952440f4.js";import"./format.3e32b8d9.js";import"./map.c8319187.js";const B={key:0,class:"flex flex-center"},T={__name:"PostDetails",setup(N){const c=Q(),a=c.currentRoute.value.params,t=S({post:null,author:"",replies:[],id:""}),u=async e=>{const o=await n().fetchPost(e);t.post=o,t.author=o[0].author,t.id=o[0].id},m=async e=>{const o=await n().fetchReplis(e);t.replies=o};return h(()=>a,async e=>{e.postId&&(u(e.postId),m(e.postId))},{deep:!1,immediate:!0}),h(()=>n().getSocketPost,e=>{a&&e.answering===a.postId&&t.replies.unshift(e)},{deep:!0}),R(()=>{const e=a.postId;typeof e!="undefined"&&(u(e),m(e))}),(e,o)=>{const g=v("router-view");return r(),i(x,{padding:""},{default:_(()=>[(r(!0),l(y,null,P(t.post,s=>(r(),i(f,w({key:s.id,replies:t.replies,showReply:!0},s),null,16,["replies"]))),128)),p(d,{class:"divider",color:"grey-2",size:"10px"}),(r(),i(g,{key:C(c).fullPath})),p(I,{author:t.author,id:t.id},null,8,["author","id"]),p(d,{class:"divider",color:"grey-2",size:"10px"}),p(k,{separator:""},{default:_(()=>[(r(!0),l(y,null,P(t.replies,s=>(r(),i(f,w({key:s.id},s,{clickable:""}),null,16))),128))]),_:1}),t.replies.length<=0?(r(),l("p",B,"No replies!")):b("",!0)]),_:1})}}};export{T as default};
