import{_ as M,D as a,a9 as r,G as o,F as n,aE as P,a7 as u,a8 as E,x as V,Q as _,aG as A,a0 as G,a1 as L,H as f,aF as j,aK as K,a4 as T,k as b,r as J,E as d,bc as h,ab as S,aa as N,ai as Q,ae as C}from"./index.b8bea508.js";import{Q as I,a as v,b as O}from"./QItem.ea7b6016.js";import{Q as W}from"./QSeparator.92a6cda9.js";import{Q as B}from"./QList.97ee5378.js";import{Q as X}from"./QPage.0605acda.js";import"./use-dark.880f3e4e.js";const Y=l=>(G("data-v-417f19f8"),l=l(),L(),l),Z=Y(()=>f("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1)),ee={__name:"NotifyEnum",props:{_id:{type:String},author:{type:String,default:""},meta:{created:{type:Date,default:NaN}},content:{text:{type:String,default:""}},icon:{type:String,default:""},clickHandler:{type:Function,required:!0}},setup(l){const i=l;function p(){i.clickHandler(i._id)}return(w,m)=>(a(),r("div",null,[o(O,null,{default:n(()=>[o(I,{top:"",avatar:""},{default:n(()=>[o(P,null,{default:n(()=>[Z]),_:1})]),_:1}),o(I,null,{default:n(()=>[o(v,null,{default:n(()=>[u(E(l.author),1)]),_:1}),o(v,{caption:"",class:"displaydot"},{default:n(()=>[u(E(l.content.text),1)]),_:1})]),_:1}),o(I,{side:"",top:""},{default:n(()=>[o(v,{caption:""},{default:n(()=>[u("5 min ago ")]),_:1}),o(V,{name:l.icon,color:"yellow"},null,8,["name"]),o(_,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"done",onClick:A(p,["stop","prevent"])})]),_:1})]),_:1})]))}};var q=M(ee,[["__scopeId","data-v-417f19f8"]]);const te={key:0},ae={key:1,class:"text-center"},oe={key:1},ne={key:1,class:"text-center"},se={key:2},re={key:1,class:"text-center"},me={__name:"NotificationPage",setup(l){const i=j(),p=K(),w=T(),m=b(()=>i.getUnreadMessage),g=b(()=>i.getUnreadReply),k=b(()=>i.getUnreadReaction),c=J("messages"),y=t=>{c.value=t},x=t=>{w.push({name:"PostDetail",params:{postId:t}})},H=t=>{let s=m.value.findIndex(e=>e.id===t);i.remove_m_unread(s),p.decreaseUnread()},U=t=>{H(t),x(t)},R=t=>{let s=g.value.findIndex(e=>e.id===t);i.remove_c_unread(s),p.decreaseUnread()},z=t=>{R(t),x(t)},D=t=>{let s=k.value.findIndex(e=>e.id===t);i.remove_r_unread(s),p.decreaseUnread()},F=t=>{D(t),x(t)};return(t,s)=>(a(),d(X,null,{default:n(()=>[o(v,{class:"text-subtitle1 flex justify-around"},{default:n(()=>[f("strong",{onClick:s[0]||(s[0]=e=>y("messages")),style:h([c.value==="messages"?{borderBottom:"3px solid #1da1f2"}:{borderBottom:"2px solid transparent"}]),class:"q-pb-sm q-pt-xl cursor-pointer"},[o(_,{flat:"",round:"",color:"grey",icon:"question_answer",size:"sm"}),u("Messages")],4),f("strong",{onClick:s[1]||(s[1]=e=>y("replies")),style:h([c.value==="replies"?{borderBottom:"3px solid #1da1f2"}:{borderBottom:"2px solid transparent"}]),class:"q-pb-sm q-pt-xl cursor-pointer"},[o(_,{flat:"",round:"",color:"grey",icon:"reviews",size:"sm"}),u("Replies")],4),f("strong",{onClick:s[2]||(s[2]=e=>y("reactions")),style:h([c.value==="reactions"?{borderBottom:"3px solid #1da1f2"}:{borderBottom:"2px solid transparent"}]),class:"q-pb-sm q-pt-xl cursor-pointer"},[o(_,{flat:"",round:"",color:"grey",icon:"thumb_up",size:"sm"}),u("Reactions")],4)]),_:1}),o(W),c.value==="messages"?(a(),r("div",te,[m.value.length>0?(a(),d(B,{key:0,separator:""},{default:n(()=>[(a(!0),r(S,null,N(m.value,e=>(a(),d(q,C({clickHandler:H.bind(e.id),icon:"star",key:e._id},e,{clickable:"",onClick:$=>U(e.id)}),null,16,["clickHandler","onClick"]))),128))]),_:1})):(a(),r("p",ae,'"No new message!"'))])):Q("",!0),c.value==="replies"?(a(),r("div",oe,[g.value.length>0?(a(),d(B,{key:0,separator:""},{default:n(()=>[(a(!0),r(S,null,N(g.value,e=>(a(),d(q,C({clickHandler:R.bind(e.id),icon:"comment",key:e._id},e,{clickable:"",onClick:$=>z(e.id)}),null,16,["clickHandler","onClick"]))),128))]),_:1})):(a(),r("p",ne,'"No new reply!"'))])):Q("",!0),c.value==="reactions"?(a(),r("div",se,[k.value.length>0?(a(),d(B,{key:0,separator:""},{default:n(()=>[(a(!0),r(S,null,N(k.value,e=>(a(),d(q,C({clickHandler:D.bind(e.id),icon:"thumb_up",key:e._id},e,{clickable:"",onClick:$=>F(e.id)}),null,16,["clickHandler","onClick"]))),128))]),_:1})):(a(),r("p",re,'"No new reaction!"'))])):Q("",!0)]),_:1}))}};export{me as default};
