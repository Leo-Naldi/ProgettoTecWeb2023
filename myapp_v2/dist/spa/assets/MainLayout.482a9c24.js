import{Q as ee,a as te,b as ae}from"./QHeader.e49c4548.js";import{Q as L}from"./QList.97ee5378.js";import{_ as I,S as oe,w as P,r as m,D as u,a9 as S,H as l,G as t,a7 as V,F as s,x as w,ac as y,Q as b,ai as j,a0 as G,a1 as J,aF as h,d as se,a4 as le,a5 as C,k as Q,Y as re,Z as W,bl as ne,C as _,E as R,aK as ie,a8 as v,aa as de,ab as me,aE as ue,ad as F,ae as pe}from"./index.b8bea508.js";import{a as T,Q as M,g as ce,l as fe,m as ve,n as U}from"./CloseDialog.f0183c26.js";import{Q as ge}from"./QCardActions.f9bcb485.js";import{b as E,Q as N,a as Y}from"./QItem.ea7b6016.js";import{C as D,Q as he}from"./ClosePopup.da0077f2.js";import{u as K,E as ye,T as _e,C as we,Q as O,_ as be}from"./logo_48.fee9f690.js";import{Q as qe,a as ke}from"./QLayout.f07a53fd.js";import{Q as g}from"./QInput.c0248187.js";import{Q as $}from"./QSeparator.92a6cda9.js";import{u as Se,Q as z,a as A}from"./searchSideBar.vue_vue_type_style_index_0_scoped_true_lang.aeed4413.js";import{W as $e}from"./WritePost.1ecdca4f.js";import"./QResizeObserver.231b9bb5.js";import"./use-dark.880f3e4e.js";import"./focus-manager.05708ea9.js";import"./QForm.0a780925.js";import"./TouchPan.755f1f67.js";import"./format.3e32b8d9.js";import"./TrendBlock.fc6c6fbb.js";import"./ChannelEnum.33074358.js";import"./ChannelButton.4b56e50f.js";import"./QCheckbox.952440f4.js";import"./map.c8319187.js";const q=a=>(G("data-v-5212f606"),a=a(),J(),a),Ve={class:"trend-container bg-grey-2 q-pa-md"},De=q(()=>l("div",{class:"flex justify-between items-center q-px-md q-py-sm"},[l("p",{class:"text-weight-bold text-h5",style:{"margin-bottom":"-0.2rem"}},"Search filter")],-1)),Qe={class:"q-pl-sm"},Ce=q(()=>l("div",{class:"q-pa-md text-h6 text-left text-bold"},"Contains",-1)),Re={class:"q-gutter-sm",style:{"margin-left":"2rem"}},Me={key:0},Ue={key:1},Pe={key:2},Be={class:"q-pl-sm"},xe=q(()=>l("div",{class:"q-pa-md text-h6 text-left text-bold"},"From",-1)),He={class:"q-gutter-sm",style:{"margin-left":"2rem"}},Le={class:"q-pl-sm"},Fe=q(()=>l("div",{class:"q-pa-md text-h6 text-left text-bold"},"Dest",-1)),Ne={class:"q-gutter-sm",style:{"margin-left":"2rem"}},Ye={class:"q-pl-sm"},je=q(()=>l("div",{class:"q-pa-md text-h6 text-left text-bold"},"Is Reply",-1)),Ie={class:"q-gutter-sm",style:{"margin-left":"2rem"}},We={class:"q-pt-md"},Te={class:"q-pl-sm"},Ee=q(()=>l("div",{class:"q-pa-md text-h6 text-left text-bold"},"Contains media",-1)),Oe={class:"q-gutter-sm",style:{"margin-left":"2rem"}},ze={class:"q-pt-md"},Ae={class:"q-pl-sm"},Ge=q(()=>l("div",{class:"q-pa-md text-h6 text-left text-bold"},"Satisfaied math condition",-1)),Je={class:"q-gutter-sm",style:{"margin-left":"2rem"}},Ke={class:"q-pl-sm q-pb-md"},Ze=q(()=>l("div",{class:"q-pa-md text-h6 text-left text-bold"},"With Time Frame",-1)),Xe={class:"q-gutter-sm",style:{"max-width":"300px","margin-left":"2rem"}},et={class:"row items-center justify-end"},tt={class:"row items-center justify-end"},at={class:"row items-center justify-end"},ot={class:"row items-center justify-end"},st={__name:"searchSideBar",setup(a){const e=oe({contains:{keywords:"",mentions:"",text:""},from:{user:""},to:{user:"",channel:""},reply:!1,media:!1,count:{min_likes:null,min_dislikes:null},timeFrame:{before:"2023-11-19 12:44",after:"2023-11-19 22:44"}});P(e,n=>{console.log("Search filter changed in component B:",n),Se().setSearchFilter(n)},{immediate:!1,deep:!0});const i=m(!1);return(n,o)=>(u(),S("div",Ve,[De,l("div",Qe,[Ce,l("div",Re,[t(g,{outlined:"",modelValue:e.contains.keywords,"onUpdate:modelValue":o[0]||(o[0]=r=>e.contains.keywords=r),placeholder:"contains #keywords"},null,8,["modelValue"]),t(g,{outlined:"",modelValue:e.contains.mentions,"onUpdate:modelValue":o[1]||(o[1]=r=>e.contains.mentions=r),placeholder:"contains mentions"},null,8,["modelValue"])])]),i.value==!1?(u(),S("div",Me,[l("p",{class:"text-weight-bold text-center q-pt-md cursor-pointer text-primary clickable",onClick:o[2]||(o[2]=r=>i.value=!0)}," Show more")])):(u(),S("div",Ue,[l("p",{class:"text-weight-bold text-center q-pt-md cursor-pointer text-primary clickable",onClick:o[3]||(o[3]=r=>i.value=!1)}," hide")])),i.value==!0?(u(),S("div",Pe,[t($,{inset:"",spaced:"10px"}),l("div",Be,[xe,l("div",He,[t(g,{outlined:"",modelValue:e.from.user,"onUpdate:modelValue":o[4]||(o[4]=r=>e.from.user=r),placeholder:"from @user"},null,8,["modelValue"])])]),t($,{inset:"",spaced:"10px"}),l("div",Le,[Fe,l("div",Ne,[t(g,{outlined:"",modelValue:e.to.user,"onUpdate:modelValue":o[5]||(o[5]=r=>e.to.user=r),placeholder:"to @user"},null,8,["modelValue"]),t(g,{outlined:"",modelValue:e.to.channel,"onUpdate:modelValue":o[6]||(o[6]=r=>e.to.channel=r),placeholder:"to \xA7channel"},null,8,["modelValue"])])]),t($,{inset:"",spaced:"10px"}),l("div",Ye,[je,l("div",Ie,[l("div",We,[V("is reply: "),t(T,{modelValue:e.reply,"onUpdate:modelValue":o[7]||(o[7]=r=>e.reply=r),"checked-icon":"check",color:"primary","unchecked-icon":"clear"},null,8,["modelValue"])])])]),t($,{inset:"",spaced:"10px"}),l("div",Te,[Ee,l("div",Oe,[l("div",ze,[V("contains media: "),t(T,{modelValue:e.media,"onUpdate:modelValue":o[8]||(o[8]=r=>e.media=r),"checked-icon":"check",color:"primary","unchecked-icon":"clear"},null,8,["modelValue"])])])]),t($,{inset:"",spaced:"10px"}),l("div",Ae,[Ge,l("div",Je,[t(g,{outlined:"",modelValue:e.count.min_likes,"onUpdate:modelValue":o[9]||(o[9]=r=>e.count.min_likes=r),placeholder:"with a min like count"},null,8,["modelValue"]),t(g,{outlined:"",modelValue:e.count.min_dislikes,"onUpdate:modelValue":o[10]||(o[10]=r=>e.count.min_dislikes=r),placeholder:"with a min dislike count"},null,8,["modelValue"])])]),t($,{inset:"",spaced:"10px"}),l("div",Ke,[Ze,l("div",Xe,[t(g,{filled:"",label:"before",modelValue:e.timeFrame.before,"onUpdate:modelValue":o[13]||(o[13]=r=>e.timeFrame.before=r)},{prepend:s(()=>[t(w,{name:"event",class:"cursor-pointer"},{default:s(()=>[t(M,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[t(z,{modelValue:e.timeFrame.before,"onUpdate:modelValue":o[11]||(o[11]=r=>e.timeFrame.before=r),mask:"YYYY-MM-DD HH:mm"},{default:s(()=>[l("div",et,[y(t(b,{label:"Close",color:"primary",flat:""},null,512),[[D]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:s(()=>[t(w,{name:"access_time",class:"cursor-pointer"},{default:s(()=>[t(M,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[t(A,{modelValue:e.timeFrame.before,"onUpdate:modelValue":o[12]||(o[12]=r=>e.timeFrame.before=r),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:s(()=>[l("div",tt,[y(t(b,{label:"Close",color:"primary",flat:""},null,512),[[D]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(g,{filled:"",label:"after",modelValue:e.timeFrame.after,"onUpdate:modelValue":o[16]||(o[16]=r=>e.timeFrame.after=r)},{prepend:s(()=>[t(w,{name:"event",class:"cursor-pointer"},{default:s(()=>[t(M,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[t(z,{modelValue:e.timeFrame.after,"onUpdate:modelValue":o[14]||(o[14]=r=>e.timeFrame.after=r),mask:"YYYY-MM-DD HH:mm"},{default:s(()=>[l("div",at,[y(t(b,{label:"Close",color:"primary",flat:""},null,512),[[D]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:s(()=>[t(w,{name:"access_time",class:"cursor-pointer"},{default:s(()=>[t(M,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[t(A,{modelValue:e.timeFrame.after,"onUpdate:modelValue":o[15]||(o[15]=r=>e.timeFrame.after=r),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:s(()=>[l("div",ot,[y(t(b,{label:"Close",color:"primary",flat:""},null,512),[[D]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])):j("",!0)]))}};var lt=I(st,[["__scopeId","data-v-5212f606"]]);const rt={name:"NotifyType",setup(){const a=K(),e=h();return{show_notifications(i){var n=document.getElementById("audio");n.src=i,n.play(),a.notify({group:"my-group",message:"You have "+e.getUnread+" unread notifies.",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar2.jpg",actions:[{label:"Watch",color:"yellow",handler:()=>{this.$router.push("/notifications")}},{label:"Dismiss",color:"white",handler:()=>{e.reset_all(),console.log("after reseted",e.getUnread)}}]})},show_notifications_message(i,n){var o=document.getElementById("audio");o.src=i,o.play(),a.notify({group:"my-group",message:"you just got a new message!",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar2.jpg",actions:[{label:"Watch",color:"yellow",handler:()=>{this.$router.push({name:"PostDetail",params:{postId:n}})}},{label:"Dismiss",color:"white",handler:()=>{e.remove_m_unread(n),console.log("after reseted",e.getUnreadMessage)}}]})},show_notifications_ReMsg(i,n,o){var r=document.getElementById("audio");r.src=i,r.play(),a.notify({group:"my-group",message:"you just got a private reply!",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar2.jpg",actions:[{label:"seeReply",color:"yellow",handler:()=>{this.$router.push({name:"PostDetail",params:{postId:o}})}},{label:"seeYourPost",color:"yellow",handler:()=>{this.$router.push({name:"PostDetail",params:{postId:n}})}},{label:"Dismiss",color:"white",handler:()=>{e.remove_c_unread(o),console.log("after reseted",e.getUnreadMessage)}}]})},show_notifications_reaction(i,n){var o=document.getElementById("audio");o.src=i,o.play(),a.notify({group:"my-group",message:"your messages "+n+" just got a new reactions!",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar2.jpg",actions:[{label:"Watch",color:"yellow",handler:()=>{this.$router.push({name:"PostDetail",params:{postId:n}})}},{label:"Dismiss",color:"white",handler:()=>{e.remove_r_unread(n),console.log("after reseted",e.getUnreadReaction)}}]})},show_notifications_reply(i,n){var o=document.getElementById("audio");o.src=i,o.play(),a.notify({group:"my-group",message:"your messages "+n+" just got a new reply!",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar2.jpg",actions:[{label:"Watch",color:"yellow",handler:()=>{this.$router.push({name:"PostDetail",params:{postId:n}})}},{label:"Dismiss",color:"white",handler:()=>{e.remove_r_unread(n),console.log("after reseted",e.getUnreadReply)}}]})}}}},nt={ref:"audio",id:"audio"},it=l("source",{type:"audio/mpeg"},null,-1),dt=[it];function mt(a,e,i,n,o,r){return u(),S("div",null,[l("audio",nt,dt,512)])}var ut=I(rt,[["render",mt]]);const pt=[{title:"home",icon:"home",link:"/home"},{title:"Search",icon:"search",link:"/Search"},{title:"Map",icon:"map",link:"/map/search"},{title:"Notify",icon:"notifications",link:"/notifications"},{title:"Channel",icon:"group",link:"/user/channel"},{title:"Bookmark",icon:"bookmark",link:"/user/bookmarks"},{title:"more",icon:"more_horiz"}],ct=se({name:"PublicLayout",components:{EssentialLink:ye,TrendsSideBar:_e,ChannelSideBar:we,searchSideBar:lt,WritePost:$e,NotifyHandler:ut},data(){return{router:le(),userHandle:C().getUserHandle,userName:C().getUserName,user:C().getUserJson}},setup(){const a=m(!1),e=m(!1),i=K(),n=m(Q(()=>i.screen.gt.xs&&i.screen.lt.md?m(!0):m(!1))),o=m(Q(()=>i.screen.gt.xs&&i.screen.lt.md?m(!0):m(!1))),r=m(!1),p=m(),B=Q(()=>h().getPlayReac.cnt),x=Q(()=>h().getPlayReac.id),H=Q(()=>ie().getUnreadCnt);return P(()=>h().getPlayReac.cnt,(c,f)=>{if(c!==f){console.log("[MainLayout] you have a new reaction!",c,f,p.value);var k="/src/assets/newReply.mp3";p.value.show_notifications_reply(k,h().getPlayReac.id)}}),P(()=>h().getPlayRe.cnt,(c,f)=>{if(c!==f){console.log("[MainLayout] you have a new reply!",c,f,p.value);var k="/src/assets/newMessage.mp3";p.value.show_notifications_reply(k,h().getPlayRe.id)}}),P(()=>h().getPlayNew.cnt,(c,f)=>{if(c!==f){console.log("[MainLayout] you have a new message!",c,f,p.value);var k="/src/assets/newMessage.mp3";p.value.show_notifications_reply(k,h().getPlayNew.id)}}),{essentialLinks:pt,leftDrawerOpen:a,rightDrawerOpen:e,miniState:n,miniStateR:o,toggleLeftDrawer(){a.value=!a.value},toggleRightDrawer(){e.value=!e.value},persistentWrite:r,audio:p,noti_Reply:B,noti_Reply_id:x,unreadCnt:H}},methods:{goHome(){this.router.currentRoute.value.name!="Public"?this.router.push({name:"Home"}):this.router.push({name:"PublicPosts"})},logout(){C().clearUser(),re().resetStoreLogged(),W().resetStoredChannelLogged(),ne(),this.router.push({name:"Public"})}},async mounted(){await W().fetchChannels()}}),Z=a=>(G("data-v-535887e0"),a=a(),J(),a),ft=Z(()=>l("img",{alt:"Quasar logo",src:be,class:"my-logo"},null,-1)),vt=[ft],gt={class:"my-nav"},ht=Z(()=>l("img",{src:"https://cdn.quasar.dev/img/avatar2.jpg"},null,-1)),yt={key:0},_t={class:"q-ml-sm rounded-rectangle"},wt={style:{display:"inline"}};function bt(a,e,i,n,o,r){const p=_("MyButton"),B=_("EssentialLink"),x=_("WritePost"),H=_("router-view"),c=_("NotifyHandler"),f=_("searchSideBar"),k=_("TrendsSideBar"),X=_("ChannelSideBar");return u(),R(qe,{view:"lHr LpR fFf"},{default:s(()=>[t(ae,{elevated:""},{default:s(()=>[t(ee,{class:"my-headerbar"},{default:s(()=>[t(p,{flat:"",dense:"",round:"",icon:"menu","aria-label":"leftSideBar",onClick:a.toggleLeftDrawer},null,8,["onClick"]),t(te,null,{default:s(()=>[V(v(a.$q.screen.width)+" x "+v(a.$q.screen.height)+", "+v(a.miniStateR)+","+v(a.leftDrawerOpen)+" "+v(a.$q.screen.gt.xs&&a.$q.screen.lt.md),1)]),_:1}),l("div",null,"Quasar v"+v(a.$q.version),1),t(p,{dense:"",flat:"",round:"",icon:"menu","aria-label":"rightSideBar",onClick:a.toggleRightDrawer},null,8,["onClick"])]),_:1})]),_:1}),t(O,{modelValue:a.leftDrawerOpen,"onUpdate:modelValue":e[5]||(e[5]=d=>a.leftDrawerOpen=d),"show-if-above":"",mini:a.miniState.value,onMouseover:e[6]||(e[6]=d=>a.miniState.value=!1),onMouseout:e[7]||(e[7]=d=>a.miniState.value=!!(a.$q.screen.gt.xs&&a.$q.screen.lt.md)),width:320,breakpoint:600,bordered:""},{default:s(()=>[l("div",{class:"flex flex-center cursor-pointer",onClick:e[0]||(e[0]=d=>a.goHome())},vt),l("div",gt,[t(L,null,{default:s(()=>[(u(!0),S(me,null,de(a.essentialLinks,d=>(u(),R(B,pe({unread_cnt:a.unreadCnt,class:"nav-padding",key:d.title},d),null,16,["unread_cnt"]))),128))]),_:1}),a.leftDrawerOpen==!0?(u(),R(b,{key:0,class:"q-mini-drawer-hide q-px-xl q-py-xs q-my-md my-button",push:"",onMouseover:e[1]||(e[1]=d=>a.miniState.value=!1),unelevated:"",rounded:"",label:"new",size:"18px",onClick:e[2]||(e[2]=d=>a.persistentWrite=!0)})):j("",!0),t(b,{round:"",icon:"history_edu",class:"q-my-md q-mini-drawer-only"}),t(ce,{modelValue:a.persistentWrite,"onUpdate:modelValue":e[3]||(e[3]=d=>a.persistentWrite=d),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[t(fe,null,{default:s(()=>[t(ve,{class:"row items-center q-pb-none"},{default:s(()=>[t(U),y(t(b,{icon:"close",flat:"",round:"",dense:""},null,512),[[D]])]),_:1}),t(x,{canRepeat:!0}),t(ge,{class:"bg-white"},{default:s(()=>[t(U)]),_:1}),t(U),t(U)]),_:1})]),_:1},8,["modelValue"])]),t(L,{class:"absolute-bottom my-info"},{default:s(()=>[t(E,{class:"cursor-pointer flex justify-between items-center"},{default:s(()=>[t(ue,{avatar:""},{default:s(()=>[ht,a.user.verified?(u(),S("div",yt,[t(w,{name:"fa-solid fa-circle-check",class:"verified",size:"1rem"})])):j("",!0)]),_:1}),t(N,{class:"my-avatar"},{default:s(()=>[t(Y,{class:"text-weight-medium"},{default:s(()=>[V(v(a.userName||"NaN")+" ",1),l("div",_t,[l("p",wt,v(a.user.admin?a.Admin:a.user.accountType),1)])]),_:1}),t(Y,{caption:""},{default:s(()=>[V("@"+v(a.userHandle||"NaN"),1)]),_:1})]),_:1}),t(N,{side:"",top:""},{default:s(()=>[t(Y,{caption:""},{default:s(()=>[t(b,{flat:"",round:"",color:"grey-5",icon:"more_horiz"})]),_:1})]),_:1}),t(he,{style:{"border-radius":"12px"},offset:[-90,0]},{default:s(()=>[t(L,null,{default:s(()=>[y((u(),R(E,{clickable:"",onClick:e[4]||(e[4]=d=>a.logout())},{default:s(()=>[t(N,null,{default:s(()=>[V("Logout from @"+v(a.userHandle||"NaN"),1)]),_:1})]),_:1})),[[D]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","mini"]),t(ke,null,{default:s(()=>[t(H),t(c,{ref:"audio"},null,512)]),_:1}),t(O,{breakpoint:600,mini:a.miniStateR.value,onMouseover:e[11]||(e[11]=d=>a.miniStateR.value=!1),onMouseout:e[12]||(e[12]=d=>a.miniStateR.value=!!(a.$q.screen.gt.xs&&a.$q.screen.lt.md)),width:350,"show-if-above":"",modelValue:a.rightDrawerOpen,"onUpdate:modelValue":e[13]||(e[13]=d=>a.rightDrawerOpen=d),side:"right",bordered:""},{default:s(()=>[y(t(f,{onMouseover:e[8]||(e[8]=d=>a.miniStateR.value=!1),class:"q-ma-md"},null,512),[[F,a.rightDrawerOpen===!0&&a.miniStateR.value==!1&&(a.router.currentRoute.value.name=="searchWithParam"||a.router.currentRoute.value.name=="searchPage")]]),y(t(k,{onMouseover:e[9]||(e[9]=d=>a.miniStateR.value=!1),class:"q-ma-md"},null,512),[[F,a.rightDrawerOpen===!0&&a.miniStateR.value==!1&&a.router.currentRoute.value.name!="DisploreHashtag"]]),y(t(X,{onMouseover:e[10]||(e[10]=d=>a.miniStateR.value=!1),class:"q-ma-md"},null,512),[[F,a.rightDrawerOpen===!0&&a.miniStateR.value==!1&&a.router.currentRoute.value.name!="DisploreChannel"]]),t(w,{name:"fa-solid fa-arrow-trend-up",class:"bg-grey-2 q-my-md round q-px-md q-mini-drawer-only flex",size:"xs"}),t(w,{name:"fa-solid fa-users-rectangle",class:"bg-grey-2 q-my-md q-px-md round q-mini-drawer-only flex",size:"xs"}),t(w,{name:"fa-solid fa-arrow-trend-up",class:"bg-grey-2 q-my-md round q-px-md q-mini-drawer-only flex",size:"xs"})]),_:1},8,["mini","modelValue"])]),_:1})}var Ot=I(ct,[["render",bt],["__scopeId","data-v-535887e0"]]);export{Ot as default};
